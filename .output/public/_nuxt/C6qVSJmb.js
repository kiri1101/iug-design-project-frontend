import Q from"./Bra-tsU3.js";import{_ as A,p as S,o as y,q as W,s as X,e as Y,g as Z,r as i,v as ee,l as te,c as oe,a as l,b as t,x as se,y as ae,j as o,k as h,w as m,z as ne}from"#entry";import le from"./D3OuImD_.js";import{a as re,_ as ie}from"./B4aQBNUl.js";import{_ as me}from"./CjD-GriD.js";import pe from"./D8atXgyY.js";import ue from"./BVWqwb4P.js";import de from"./d5APeyL3.js";import ce from"./DvucPan7.js";import fe from"./nCo-kS2h.js";import{u as _e}from"./C1qWLS7T.js";import"./DyWaDKSL.js";import"./Og8KnRTi.js";import"./COg6NeBX.js";import"./CE0L2SVI.js";import"./CY-nOYLW.js";import"./BmrVIpcX.js";import"./ODI3gou8.js";import"./DBCFK9xT.js";import"./jgw6tWqO.js";import"./C3VIwUhP.js";import"./CkU7djot.js";import"./SeQpmZTW.js";import"./CGNp-gXe.js";import"./BeSnMvgh.js";import"./Djn0ckEb.js";import"./BOGFhJ4F.js";import"./C9ZlsTrT.js";import"./CKBih7QK.js";import"./CmAuq5_j.js";import"./DtGAGpKz.js";import"./5wShx0Wh.js";import"./CS3NRzvR.js";import"./wsX1Q0PG.js";import"./DXU6A6-k.js";import"./BTGqB2la.js";import"./BHhWj450.js";import"./Dlz8Odxd.js";import"./DZ7mUVBi.js";import"./BB9fBKtR.js";const be={__name:"ButtonOutlineButton",props:{customClass:{type:String,default:""}},setup(v){return(u,p)=>{const g=Q;return y(),S(g,{variant:"outlined",class:W(["text-xs transition duration-300 ease-linear shadow hover:shadow-gray-900 h-7",v.customClass]),pt:{icon:"text-xs"}},null,8,["class"])}}},ve=A(be,[["__scopeId","data-v-5d519cf0"]]),ge={};function he(v,u){const p=le;return y(),S(p,{pt:{root:"text-base"}})}const ye=Object.assign(A(ge,[["render",he],["__scopeId","data-v-5a2ebd3f"]]),{__name:"NavBreadcrumb"}),Ne={};function xe(v,u){const p=pe;return y(),S(p,{pt:{root:"w-full h-9"}})}const we=Object.assign(A(Ne,[["render",xe]]),{__name:"InputSelect"}),Ue={"aria-label":"List of user accounts",class:"space-y-7"},Ve={class:"space-y-2"},ke={class:"flex items-center justify-between pb-3 border-b border-gray-200"},$e={class:"text-emerald-500 pi pi-spinner animate-spin",style:{"font-size":"1.2rem"}},Ce={class:"space-y-1"},Ae={class:"space-x-1.5"},Se=["onClick"],Oe=["onClick"],gt={__name:"list",setup(v){X(()=>$());const u=te(),{$apiFetch:p}=Y(),{s:g,e:N,w:x}=_e(),O=Z(),w=i(!1),U=i(!1),V=i(!1),B=i([]),c=i(!1),f=i(!1),k=i({}),s=i({firstName:"",lastName:"",mailingAddress:"",phoneNumber:"",position:"",department:""}),z=i({icon:"pi pi-home"}),P=i([{label:"Users"}]),T=ee(()=>f.value?"Edit user":"Create new user"),L=()=>c.value=!0,M=()=>c.value=!1,D=()=>f.value=!0,I=()=>{k.value={},f.value=!1},$=async()=>{U.value=!0;try{const a=await p(u.public.user.list);console.log("users list: ",a),B.value=a.data.users}catch({status:a,data:e}){switch(console.log("users list error: ",e,a),a){case 422:Object.values(e.errors).map(r=>N(r[0]));break;default:x(e.message);break}}finally{U.value=!1}},E=async()=>{let a=f.value?u.public.user.edit.replace(":user",k.value.id):u.public.user.store;w.value=!0;try{const e=await p(a,{method:"POST",body:s.value});console.log("user store: ",e),g(e.message),M(),f.value&&I(),$()}catch({status:e,data:r}){switch(console.log("user store error: ",e,r),e){case 422:Object.values(r.errors).map(_=>N(_[0]));break;default:x(r.message);break}}finally{w.value=!1}},F=async a=>{V.value=!0;try{const e=await p(u.public.user.delete.replace(":user",a),{method:"POST"});g(e.message),$()}catch({status:e,data:r}){switch(console.log("user delete error: ",e,r),e){case 422:Object.values(r.errors).map(_=>N(_[0]));break;default:x(r.message);break}}finally{V.value=!1}},q=a=>{s.value.firstName=a.firstName,s.value.lastName=a.lastName,s.value.mailingAddress=a.mailingAddress,s.value.phoneNumber=a.phoneNumber,s.value.position=a.role[0],s.value.department=a.department,console.log(a,s.value),k.value=a,D(),L()};return(a,e)=>{const r=ve,_=ye,b=fe,R=ce,C=re,d=de,H=me,j=we,J=ie,G=ue;return y(),oe("section",Ue,[l("div",Ve,[l("div",ke,[l("span",null,[se(l("i",$e,null,512),[[ae,o(V)]])]),t(r,{onClick:h(L,["prevent"]),label:"Create",icon:"pi pi-plus",pt:{icon:{style:"font-size: 0.7rem"}}})]),l("div",Ce,[e[7]||(e[7]=l("h1",{class:"text-xl font-semibold text-gray-500"},"Users list",-1)),t(_,{home:o(z),model:o(P)},null,8,["home","model"])])]),t(R,{value:o(B),paginator:"",rows:10,rowsPerPageOptions:[20,30,40,50],scrollable:"",loading:o(U),scrollHeight:"400px",virtualScrollerOptions:{itemSize:44},tableStyle:"min-width: 50rem"},{default:m(()=>[t(b,{field:"fullName",header:"Name",style:{width:"30%"}}),t(b,{field:"mailingAddress",header:"Email",style:{width:"20%"}}),t(b,{field:"phoneNumber",header:"Phone Number",style:{width:"20%"}}),t(b,{field:"position",header:"Position",style:{width:"20%"}}),t(b,{header:"Actions",style:{width:"10%"}},{body:m(n=>[l("span",Ae,[l("i",{onClick:h(K=>q(n.data),["prevent"]),class:"cursor-pointer pi pi-pen-to-square hover:text-emerald-500"},null,8,Se),l("i",{onClick:h(K=>F(n.data.id),["prevent"]),class:"z-50 cursor-pointer pi pi-trash hover:text-red-500"},null,8,Oe)])]),_:1})]),_:1},8,["value","loading"]),t(G,{visible:o(c),"onUpdate:visible":e[6]||(e[6]=n=>ne(c)?c.value=n:null),maximizable:"",modal:"",header:o(T)},{default:m(()=>[l("form",{onSubmit:h(E,["prevent"]),class:"px-3 mt-7 space-y-7 xs:w-96"},[t(d,{variant:"on"},{default:m(()=>[t(C,{id:"firstName",modelValue:o(s).firstName,"onUpdate:modelValue":e[0]||(e[0]=n=>o(s).firstName=n),autocomplete:"off"},null,8,["modelValue"]),e[8]||(e[8]=l("label",{for:"firstName"}," First Name ",-1))]),_:1}),t(d,{variant:"on"},{default:m(()=>[t(C,{id:"lastName",modelValue:o(s).lastName,"onUpdate:modelValue":e[1]||(e[1]=n=>o(s).lastName=n),autocomplete:"off"},null,8,["modelValue"]),e[9]||(e[9]=l("label",{for:"lastName"}," Last Name ",-1))]),_:1}),t(d,{variant:"on"},{default:m(()=>[t(C,{id:"mailingAddress",modelValue:o(s).mailingAddress,"onUpdate:modelValue":e[2]||(e[2]=n=>o(s).mailingAddress=n),type:"email",autocomplete:"off"},null,8,["modelValue"]),e[10]||(e[10]=l("label",{for:"mailingAddress"}," Email Address ",-1))]),_:1}),t(d,{variant:"on"},{default:m(()=>[t(H,{id:"phoneNumber",modelValue:o(s).phoneNumber,"onUpdate:modelValue":e[3]||(e[3]=n=>o(s).phoneNumber=n),mask:"9-99-99-99-99"},null,8,["modelValue"]),e[11]||(e[11]=l("label",{for:"phoneNumber"}," Phone Number ",-1))]),_:1}),t(d,{variant:"on"},{default:m(()=>[t(j,{modelValue:o(s).position,"onUpdate:modelValue":e[4]||(e[4]=n=>o(s).position=n),options:o(O).authUser.settings.roles,optionLabel:"name",labelId:"position"},null,8,["modelValue","options"]),e[12]||(e[12]=l("label",{for:"position"}," Function ",-1))]),_:1}),t(d,{variant:"on"},{default:m(()=>[t(j,{modelValue:o(s).department,"onUpdate:modelValue":e[5]||(e[5]=n=>o(s).department=n),options:o(O).authUser.settings.departments,optionLabel:"name",labelId:"department"},null,8,["modelValue","options"]),e[13]||(e[13]=l("label",{for:"department"}," Department ",-1))]),_:1}),t(J,{type:"submit",label:"Join now",iconPos:"right",loading:o(w)},null,8,["loading"])],32)]),_:1},8,["visible","header"])])}}};export{gt as default};
